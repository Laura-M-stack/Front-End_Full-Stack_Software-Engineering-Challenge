<template>
  <div class="product-card">
    <!-- Card top section with status badges and quantity controls -->
    <div class="card-top">
      <div class="badges">
        <div class="on-sale">ON SALE</div>
        <div class="in-stock">In stock</div>
      </div>

      <!-- Quantity counter, bound to product object -->
      <!-- Uses increment() and decrement() methods from the parent context -->
      <div class="quantity-controls">
        <span class="qty">${product.quantity || 1}</span>
        <div class="arrows">
          <button class="arrow" click.delegate="increment(product)">▲</button>
          <button class="arrow" click.delegate="decrement(product)">▼</button>
        </div>
      </div>
    </div>

    <!-- Dynamically bound product image and alt text for accessibility -->
    <img class="product-image" src.bind="product.image" alt.bind="product.name" />

    <!-- Product name -->
    <h3>${product.name}</h3>

    <!-- Price and original price (struck through for sale display) -->
    <div class="price-info">
      <span class="price">$${product.price.toFixed(2)}</span>
      <span class="original-price">$${product.originalPrice.toFixed(2)}</span>
    </div>

    <!-- Product description -->
    <p class="description">${product.description}</p>

    <!-- Action buttons: details (non-functional) and ADD (with cart icon and click handler) -->
    <div class="card-actions">
      <button class="details-btn">DETAILS</button>
      <button class="add-btn" click.delegate="addToCart(product)">
        ADD <img src="../assets/icon-cart.png" alt="Cart" class="cart-icon" />
      </button>
    </div>
  </div>
</template>
